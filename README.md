# SA-Token ç™»å½•è®¤è¯ç³»ç»Ÿ

<div align="center">

![Java](https://img.shields.io/badge/Java-21-orange)
![Spring Boot](https://img.shields.io/badge/Spring%20Boot-3.4.7-brightgreen)
![SA-Token](https://img.shields.io/badge/SA--Token-1.44.0-blue)
![MySQL](https://img.shields.io/badge/MySQL-8.0-blue)
![License](https://img.shields.io/badge/License-MIT-green)

ä¸€ä¸ªåŸºäº Spring Boot 3 å’Œ SA-Token çš„ç°ä»£åŒ–ç™»å½•è®¤è¯ç³»ç»Ÿ

[åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§) â€¢ [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ [APIæ–‡æ¡£](#-apiæ–‡æ¡£) â€¢ [æµ‹è¯•](#-æµ‹è¯•) â€¢ [éƒ¨ç½²](#-éƒ¨ç½²)

</div>

## ğŸ“‹ ç›®å½•

- [é¡¹ç›®ç®€ä»‹](#-é¡¹ç›®ç®€ä»‹)
- [åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§)
- [æŠ€æœ¯æ ˆ](#-æŠ€æœ¯æ ˆ)
- [é¡¹ç›®ç»“æ„](#-é¡¹ç›®ç»“æ„)
- [å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [é…ç½®è¯´æ˜](#-é…ç½®è¯´æ˜)
- [APIæ–‡æ¡£](#-apiæ–‡æ¡£)
- [æµ‹è¯•](#-æµ‹è¯•)
- [éƒ¨ç½²](#-éƒ¨ç½²)
- [è´¡çŒ®æŒ‡å—](#-è´¡çŒ®æŒ‡å—)
- [è®¸å¯è¯](#-è®¸å¯è¯)

## ğŸš€ é¡¹ç›®ç®€ä»‹

SA-Token ç™»å½•è®¤è¯ç³»ç»Ÿæ˜¯ä¸€ä¸ªåŸºäº Spring Boot 3 å’Œ SA-Token æ¡†æ¶æ„å»ºçš„ç°ä»£åŒ–ç”¨æˆ·è®¤è¯è§£å†³æ–¹æ¡ˆã€‚è¯¥é¡¹ç›®æä¾›äº†å®Œæ•´çš„ç”¨æˆ·æ³¨å†Œã€ç™»å½•ã€æƒé™ç®¡ç†åŠŸèƒ½ï¼Œå…·æœ‰é«˜æ€§èƒ½ã€æ˜“æ‰©å±•ã€å®‰å…¨å¯é çš„ç‰¹ç‚¹ã€‚

### ğŸ¯ è®¾è®¡ç›®æ ‡

- **ç®€å•æ˜“ç”¨**: æä¾›ç®€æ´çš„APIæ¥å£ï¼Œé™ä½é›†æˆæˆæœ¬
- **å®‰å…¨å¯é **: é‡‡ç”¨ç°ä»£åŒ–çš„å®‰å…¨æœºåˆ¶ï¼Œä¿æŠ¤ç”¨æˆ·æ•°æ®
- **é«˜æ€§èƒ½**: ä¼˜åŒ–çš„æ¶æ„è®¾è®¡ï¼Œæ”¯æŒé«˜å¹¶å‘è®¿é—®
- **æ˜“æ‰©å±•**: æ¨¡å—åŒ–è®¾è®¡ï¼Œä¾¿äºåŠŸèƒ½æ‰©å±•å’Œå®šåˆ¶

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ” è®¤è¯åŠŸèƒ½
- âœ… ç”¨æˆ·æ³¨å†Œä¸ç™»å½•
- âœ… JWT Token ç”Ÿæˆä¸éªŒè¯
- âœ… ç™»å½•çŠ¶æ€æ£€æŸ¥
- âœ… å®‰å…¨æ³¨é”€
- âœ… å¤šç«¯ç™»å½•æ”¯æŒ
- âœ… ä¼šè¯ç®¡ç†

### ğŸ‘¥ ç”¨æˆ·ç®¡ç†
- âœ… ç”¨æˆ·ä¿¡æ¯CRUDæ“ä½œ
- âœ… ç”¨æˆ·å/é‚®ç®±/æ‰‹æœºå·å”¯ä¸€æ€§éªŒè¯
- âœ… é€»è¾‘åˆ é™¤æœºåˆ¶
- âœ… ç”¨æˆ·çŠ¶æ€ç®¡ç†

### ğŸ›¡ï¸ æƒé™æ§åˆ¶
- âœ… åŸºäºè§’è‰²çš„æƒé™æ§åˆ¶(RBAC)
- âœ… ç»†ç²’åº¦æƒé™ç®¡ç†
- âœ… æ³¨è§£å¼æƒé™éªŒè¯
- âœ… åŠ¨æ€æƒé™åˆ†é…

### ğŸ”’ å®‰å…¨ç‰¹æ€§
- âœ… å¯†ç åŠ å¯†å­˜å‚¨(SHA-256 + ç›å€¼)
- âœ… å‚æ•°éªŒè¯ä¸é˜²æŠ¤
- âœ… SQLæ³¨å…¥é˜²æŠ¤
- âœ… XSSæ”»å‡»é˜²æŠ¤

### ğŸ“Š ç›‘æ§ä¸æ—¥å¿—
- âœ… æ“ä½œæ—¥å¿—è®°å½•
- âœ… ç™»å½•çŠ¶æ€ç›‘æ§
- âœ… å¼‚å¸¸å¤„ç†æœºåˆ¶

## ğŸ› ï¸ æŠ€æœ¯æ ˆ

### åç«¯æŠ€æœ¯
- **Java 21** - ç¼–ç¨‹è¯­è¨€
- **Spring Boot 3.4.7** - åº”ç”¨æ¡†æ¶
- **SA-Token 1.44.0** - è®¤è¯æˆæƒæ¡†æ¶
- **Spring Data JPA** - æ•°æ®è®¿é—®å±‚
- **MyBatis 3.0.4** - æŒä¹…å±‚æ¡†æ¶
- **MySQL 8.0** - æ•°æ®åº“
- **Lombok** - ä»£ç ç®€åŒ–å·¥å…·

### å¼€å‘å·¥å…·
- **Maven** - é¡¹ç›®æ„å»ºå·¥å…·
- **JUnit 5** - å•å…ƒæµ‹è¯•æ¡†æ¶
- **Mockito** - Mockæµ‹è¯•æ¡†æ¶
- **H2 Database** - æµ‹è¯•æ•°æ®åº“

## ğŸ“ é¡¹ç›®ç»“æ„

```
sa-token-demo/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ main/
â”‚   â”‚   â”œâ”€â”€ java/com/viper/demo/
â”‚   â”‚   â”‚   â”œâ”€â”€ Config/              # é…ç½®ç±»
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ DataInitializer.java
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ StpInterfaceImpl.java
â”‚   â”‚   â”‚   â”œâ”€â”€ Controller/          # æ§åˆ¶å™¨å±‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ AuthController.java
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ UserController.java
â”‚   â”‚   â”‚   â”œâ”€â”€ Mapper/              # MyBatisæ˜ å°„å™¨
â”‚   â”‚   â”‚   â”œâ”€â”€ Pojo/                # å®ä½“ç±»å’ŒDTO
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ User.java
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Result.java
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ LoginRequest.java
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ RegisterRequest.java
â”‚   â”‚   â”‚   â”œâ”€â”€ Repository/          # JPAæ•°æ®è®¿é—®å±‚
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ UserRepository.java
â”‚   â”‚   â”‚   â”œâ”€â”€ Service/             # ä¸šåŠ¡é€»è¾‘å±‚
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ UserService.java
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Impl/
â”‚   â”‚   â”‚   â”‚       â””â”€â”€ UserServiceImpl.java
â”‚   â”‚   â”‚   â”œâ”€â”€ Utils/               # å·¥å…·ç±»
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ PasswordUtil.java
â”‚   â”‚   â”‚   â””â”€â”€ SaTokenDemoApplication.java
â”‚   â”‚   â””â”€â”€ resources/
â”‚   â”‚       â”œâ”€â”€ application.properties
â”‚   â”‚       â””â”€â”€ application-prod.properties
â”‚   â””â”€â”€ test/                        # æµ‹è¯•ä»£ç 
â”‚       â”œâ”€â”€ java/com/viper/demo/
â”‚       â”‚   â”œâ”€â”€ Controller/          # æ§åˆ¶å™¨æµ‹è¯•
â”‚       â”‚   â”œâ”€â”€ Service/             # æœåŠ¡å±‚æµ‹è¯•
â”‚       â”‚   â”œâ”€â”€ Repository/          # æ•°æ®è®¿é—®å±‚æµ‹è¯•
â”‚       â”‚   â”œâ”€â”€ Utils/               # å·¥å…·ç±»æµ‹è¯•
â”‚       â”‚   â”œâ”€â”€ Pojo/                # å®ä½“ç±»æµ‹è¯•
â”‚       â”‚   â”œâ”€â”€ Config/              # é…ç½®ç±»æµ‹è¯•
â”‚       â”‚   â””â”€â”€ Integration/         # é›†æˆæµ‹è¯•
â”‚       â””â”€â”€ resources/
â”‚           â””â”€â”€ application-test.properties
â”œâ”€â”€ docs/                            # æ–‡æ¡£ç›®å½•
â”‚   â”œâ”€â”€ API_DOCUMENTATION.md
â”‚   â”œâ”€â”€ TEST_DOCUMENTATION.md
â”‚   â”œâ”€â”€ TEST_SUMMARY.md
â”‚   â””â”€â”€ TESTING_COMPLETE.md
â”œâ”€â”€ run-tests.sh                     # æµ‹è¯•è¿è¡Œè„šæœ¬
â”œâ”€â”€ pom.xml                          # Mavené…ç½®æ–‡ä»¶
â””â”€â”€ README.md                        # é¡¹ç›®è¯´æ˜æ–‡æ¡£
```

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚

- **Java**: 21+
- **Maven**: 3.6+
- **MySQL**: 8.0+
- **IDE**: IntelliJ IDEA / Eclipse

### 1. å…‹éš†é¡¹ç›®

```bash
git clone <repository-url>
cd sa-token-demo
```

### 2. æ•°æ®åº“é…ç½®

åˆ›å»ºMySQLæ•°æ®åº“ï¼š

```sql
CREATE DATABASE sa_token_demo CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
```

### 3. é…ç½®æ–‡ä»¶

ä¿®æ”¹ `src/main/resources/application.properties`ï¼š

```properties
# æ•°æ®åº“é…ç½®
spring.datasource.url=jdbc:mysql://localhost:3306/sa_token_demo
spring.datasource.username=your_username
spring.datasource.password=your_password

# SA-Tokené…ç½®
sa-token.token-name=satoken
sa-token.timeout=2592000
sa-token.active-timeout=-1
sa-token.is-concurrent=true
sa-token.is-share=false
sa-token.token-style=uuid
```

### 4. è¿è¡Œé¡¹ç›®

```bash
# ç¼–è¯‘é¡¹ç›®
./mvnw clean compile

# è¿è¡Œé¡¹ç›®
./mvnw spring-boot:run
```

### 5. éªŒè¯å®‰è£…

è®¿é—® `http://localhost:9191`ï¼Œé¡¹ç›®å¯åŠ¨æˆåŠŸåä¼šè‡ªåŠ¨åˆ›å»ºä»¥ä¸‹æµ‹è¯•ç”¨æˆ·ï¼š

| ç”¨æˆ·å | å¯†ç    | è§’è‰²  | é‚®ç®±              |
|--------|--------|-------|-------------------|
| admin  | 123456 | admin | admin@example.com |
| test   | 123456 | user  | test@example.com  |

## âš™ï¸ é…ç½®è¯´æ˜

### åº”ç”¨é…ç½®

```properties
# åº”ç”¨åŸºæœ¬é…ç½®
spring.application.name=sa-token-demo
server.port=9191

# æ•°æ®åº“é…ç½®
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true

# SA-Tokené…ç½®
sa-token.token-name=satoken          # Tokenåç§°
sa-token.timeout=2592000             # Tokenæœ‰æ•ˆæœŸ(ç§’)
sa-token.active-timeout=-1           # Tokenä¸´æ—¶æœ‰æ•ˆæœŸ
sa-token.is-concurrent=true          # æ˜¯å¦å…è®¸åŒä¸€è´¦å·å¹¶å‘ç™»å½•
sa-token.is-share=false              # åœ¨å¤šäººç™»å½•åŒä¸€è´¦å·æ—¶ï¼Œæ˜¯å¦å…±ç”¨ä¸€ä¸ªtoken
sa-token.token-style=uuid            # Tokené£æ ¼
```

### ç¯å¢ƒé…ç½®

é¡¹ç›®æ”¯æŒå¤šç¯å¢ƒé…ç½®ï¼š

- `application.properties` - é»˜è®¤é…ç½®
- `application-dev.properties` - å¼€å‘ç¯å¢ƒ
- `application-test.properties` - æµ‹è¯•ç¯å¢ƒ  
- `application-prod.properties` - ç”Ÿäº§ç¯å¢ƒ

## ğŸ“– APIæ–‡æ¡£

### è®¤è¯ç›¸å…³æ¥å£

#### ç”¨æˆ·ç™»å½•
```http
POST /auth/login
Content-Type: application/json

{
    "username": "admin",
    "password": "123456"
}
```

#### ç”¨æˆ·æ³¨å†Œ
```http
POST /auth/register
Content-Type: application/json

{
    "username": "newuser",
    "password": "123456",
    "email": "newuser@example.com",
    "phone": "13800138000"
}
```

#### æ£€æŸ¥ç™»å½•çŠ¶æ€
```http
GET /auth/isLogin
```

#### è·å–ç”¨æˆ·ä¿¡æ¯
```http
GET /auth/userInfo
Authorization: satoken <token>
```

#### ç”¨æˆ·æ³¨é”€
```http
POST /auth/logout
Authorization: satoken <token>
```

### ç”¨æˆ·ç®¡ç†æ¥å£

#### è·å–ç”¨æˆ·ä¸ªäººä¿¡æ¯
```http
GET /user/profile
Authorization: satoken <token>
```

#### æ›´æ–°ç”¨æˆ·ä¿¡æ¯
```http
PUT /user/profile
Authorization: satoken <token>
Content-Type: application/json

{
    "email": "newemail@example.com",
    "phone": "13800138999"
}
```

#### è·å–ç”¨æˆ·åˆ—è¡¨ï¼ˆç®¡ç†å‘˜ï¼‰
```http
GET /user/list
Authorization: satoken <admin_token>
```

#### è·å–ç”¨æˆ·æƒé™ä¿¡æ¯
```http
GET /user/permissions
Authorization: satoken <token>
```

### å“åº”æ ¼å¼

æ‰€æœ‰APIå“åº”éƒ½éµå¾ªç»Ÿä¸€æ ¼å¼ï¼š

```json
{
    "code": 200,
    "message": "success",
    "data": {
        // å“åº”æ•°æ®
    }
}
```

**çŠ¶æ€ç è¯´æ˜**ï¼š
- `200`: æˆåŠŸ
- `400`: è¯·æ±‚å‚æ•°é”™è¯¯
- `401`: æœªç™»å½•æˆ–ç™»å½•å¤±è´¥
- `403`: æƒé™ä¸è¶³
- `404`: èµ„æºä¸å­˜åœ¨
- `500`: æœåŠ¡å™¨å†…éƒ¨é”™è¯¯

è¯¦ç»†APIæ–‡æ¡£è¯·å‚è€ƒï¼š[API_DOCUMENTATION.md](docs/API_DOCUMENTATION.md)

## ğŸ§ª æµ‹è¯•

é¡¹ç›®åŒ…å«å®Œæ•´çš„æµ‹è¯•ä½“ç³»ï¼Œè¦†ç›–æ‰€æœ‰æ ¸å¿ƒåŠŸèƒ½ã€‚

### æµ‹è¯•ç»Ÿè®¡

| æµ‹è¯•ç±»å‹ | æ–‡ä»¶æ•° | æµ‹è¯•æ–¹æ³•æ•° | ä»£ç è¡Œæ•° |
|---------|-------|-----------|----------|
| å•å…ƒæµ‹è¯• | 10 | 163 | 2631 |
| é›†æˆæµ‹è¯• | 1 | 10 | 285 |
| **æ€»è®¡** | **11** | **173** | **2916** |

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
./mvnw test

# è¿è¡Œç‰¹å®šæµ‹è¯•ç±»
./mvnw test -Dtest=UserServiceTest

# è¿è¡Œæµ‹è¯•å¹¶ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
./mvnw test jacoco:report

# ä½¿ç”¨æµ‹è¯•è„šæœ¬ï¼ˆäº¤äº’å¼ï¼‰
chmod +x run-tests.sh
./run-tests.sh
```

### æµ‹è¯•è¦†ç›–

- âœ… **å•å…ƒæµ‹è¯•**: æ‰€æœ‰Serviceã€Controllerã€Utilsç±»
- âœ… **é›†æˆæµ‹è¯•**: å®Œæ•´çš„è®¤è¯æµç¨‹
- âœ… **æ•°æ®å±‚æµ‹è¯•**: Repositoryå±‚æµ‹è¯•
- âœ… **Webå±‚æµ‹è¯•**: MockMvcæµ‹è¯•
- âœ… **å¼‚å¸¸æµ‹è¯•**: è¾¹ç•Œæ¡ä»¶å’Œå¼‚å¸¸å¤„ç†

è¯¦ç»†æµ‹è¯•æ–‡æ¡£è¯·å‚è€ƒï¼š[TEST_DOCUMENTATION.md](docs/TEST_DOCUMENTATION.md)

## ğŸš¢ éƒ¨ç½²

### Dockeréƒ¨ç½²

åˆ›å»º `Dockerfile`ï¼š

```dockerfile
FROM openjdk:21-jdk-slim

WORKDIR /app

COPY target/demo-0.0.1-SNAPSHOT.jar app.jar

EXPOSE 9191

ENTRYPOINT ["java", "-jar", "app.jar"]
```

1. æ„å»ºé•œåƒï¼š
```bash
./mvnw clean package -DskipTests
docker build -t sa-token-demo .
```

2. è¿è¡Œå®¹å™¨ï¼š
```bash
docker run -d \
  --name sa-token-demo \
  -p 9191:9191 \
  -e SPRING_PROFILES_ACTIVE=prod \
  -e SPRING_DATASOURCE_URL=jdbc:mysql://host:3306/sa_token_demo \
  -e SPRING_DATASOURCE_USERNAME=username \
  -e SPRING_DATASOURCE_PASSWORD=password \
  sa-token-demo
```

### Docker Composeéƒ¨ç½²

åˆ›å»º `docker-compose.yml`ï¼š

```yaml
version: '3.8'

services:
  mysql:
    image: mysql:8.0
    container_name: sa-token-mysql
    environment:
      MYSQL_ROOT_PASSWORD: root123
      MYSQL_DATABASE: sa_token_demo
      MYSQL_USER: sa_token
      MYSQL_PASSWORD: sa_token123
    ports:
      - "3306:3306"
    volumes:
      - mysql_data:/var/lib/mysql
    networks:
      - sa-token-network

  app:
    build: .
    container_name: sa-token-app
    depends_on:
      - mysql
    environment:
      SPRING_PROFILES_ACTIVE: prod
      SPRING_DATASOURCE_URL: jdbc:mysql://mysql:3306/sa_token_demo
      SPRING_DATASOURCE_USERNAME: sa_token
      SPRING_DATASOURCE_PASSWORD: sa_token123
    ports:
      - "9191:9191"
    networks:
      - sa-token-network

volumes:
  mysql_data:

networks:
  sa-token-network:
    driver: bridge
```

è¿è¡Œï¼š
```bash
docker-compose up -d
```

### ä¼ ç»Ÿéƒ¨ç½²

1. æ‰“åŒ…é¡¹ç›®ï¼š
```bash
./mvnw clean package -DskipTests
```

2. è¿è¡ŒJARåŒ…ï¼š
```bash
java -jar target/demo-0.0.1-SNAPSHOT.jar \
  --spring.profiles.active=prod \
  --spring.datasource.url=jdbc:mysql://localhost:3306/sa_token_demo \
  --spring.datasource.username=username \
  --spring.datasource.password=password
```

### ç”Ÿäº§ç¯å¢ƒé…ç½®

åˆ›å»º `application-prod.properties`ï¼š

```properties
# ç”Ÿäº§ç¯å¢ƒé…ç½®
spring.jpa.show-sql=false
spring.jpa.hibernate.ddl-auto=validate
logging.level.com.viper.demo=INFO
sa-token.is-log=false

# æ€§èƒ½ä¼˜åŒ–
spring.jpa.properties.hibernate.jdbc.batch_size=20
spring.jpa.properties.hibernate.order_inserts=true
spring.jpa.properties.hibernate.order_updates=true
spring.jpa.properties.hibernate.jdbc.batch_versioned_data=true

# è¿æ¥æ± é…ç½®
spring.datasource.hikari.maximum-pool-size=20
spring.datasource.hikari.minimum-idle=5
spring.datasource.hikari.idle-timeout=300000
spring.datasource.hikari.connection-timeout=20000
```

### å¥åº·æ£€æŸ¥

é¡¹ç›®å†…ç½®å¥åº·æ£€æŸ¥ç«¯ç‚¹ï¼š

```bash
# æ£€æŸ¥åº”ç”¨çŠ¶æ€
curl http://localhost:9191/actuator/health

# æ£€æŸ¥åº”ç”¨ä¿¡æ¯
curl http://localhost:9191/actuator/info
```

### ç›‘æ§é…ç½®

æ·»åŠ ç›‘æ§ä¾èµ–åˆ° `pom.xml`ï¼š

```xml
<dependency>
    <groupId>org.springframework.boot</groupId>
    <artifactId>spring-boot-starter-actuator</artifactId>
</dependency>
<dependency>
    <groupId>io.micrometer</groupId>
    <artifactId>micrometer-registry-prometheus</artifactId>
</dependency>
```

é…ç½®ç›‘æ§ç«¯ç‚¹ï¼š

```properties
# ç›‘æ§é…ç½®
management.endpoints.web.exposure.include=health,info,metrics,prometheus
management.endpoint.health.show-details=when-authorized
management.metrics.export.prometheus.enabled=true
```

## ğŸ”§ å¸¸è§é—®é¢˜

### Q: å¦‚ä½•ä¿®æ”¹é»˜è®¤ç«¯å£ï¼Ÿ

A: åœ¨ `application.properties` ä¸­ä¿®æ”¹ï¼š
```properties
server.port=8080
```

### Q: å¦‚ä½•è‡ªå®šä¹‰Tokenæœ‰æ•ˆæœŸï¼Ÿ

A: ä¿®æ”¹SA-Tokené…ç½®ï¼š
```properties
sa-token.timeout=7200  # 2å°æ—¶ï¼Œå•ä½ï¼šç§’
```

### Q: å¦‚ä½•å¯ç”¨HTTPSï¼Ÿ

A: é…ç½®SSLè¯ä¹¦ï¼š
```properties
server.ssl.key-store=classpath:keystore.p12
server.ssl.key-store-password=password
server.ssl.key-store-type=PKCS12
server.ssl.key-alias=tomcat
```

### Q: å¦‚ä½•é…ç½®è·¨åŸŸï¼Ÿ

A: é¡¹ç›®å·²å†…ç½®è·¨åŸŸé…ç½®ï¼Œå¦‚éœ€è‡ªå®šä¹‰ï¼Œä¿®æ”¹ `WebConfig`ï¼š
```java
@Configuration
public class WebConfig implements WebMvcConfigurer {
    @Override
    public void addCorsMappings(CorsRegistry registry) {
        registry.addMapping("/**")
                .allowedOrigins("http://localhost:3000")
                .allowedMethods("*")
                .allowCredentials(true);
    }
}
```

### Q: æ•°æ®åº“è¿æ¥å¤±è´¥æ€ä¹ˆåŠï¼Ÿ

A: æ£€æŸ¥ä»¥ä¸‹é…ç½®ï¼š
1. æ•°æ®åº“æœåŠ¡æ˜¯å¦å¯åŠ¨
2. è¿æ¥URLæ˜¯å¦æ­£ç¡®
3. ç”¨æˆ·åå¯†ç æ˜¯å¦æ­£ç¡®
4. æ•°æ®åº“æ˜¯å¦å­˜åœ¨
5. é˜²ç«å¢™è®¾ç½®

### Q: å¦‚ä½•é‡ç½®ç®¡ç†å‘˜å¯†ç ï¼Ÿ

A: ç›´æ¥ä¿®æ”¹æ•°æ®åº“æˆ–ä½¿ç”¨ä»¥ä¸‹SQLï¼š
```sql
UPDATE user SET password = 'æ–°å¯†ç ' WHERE username = 'admin';
```

## ğŸ“š æœ€ä½³å®è·µ

### å®‰å…¨å»ºè®®

1. **ç”Ÿäº§ç¯å¢ƒå¯†ç åŠ å¯†**
   ```java
   // ä½¿ç”¨BCryptåŠ å¯†å¯†ç 
   String hashedPassword = BCrypt.hashpw(password, BCrypt.gensalt());
   ```

2. **é…ç½®HTTPS**
   - ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä½¿ç”¨HTTPS
   - é…ç½®SSLè¯ä¹¦
   - å¼ºåˆ¶é‡å®šå‘HTTPåˆ°HTTPS

3. **æ•°æ®åº“å®‰å…¨**
   - ä½¿ç”¨ä¸“ç”¨æ•°æ®åº“ç”¨æˆ·
   - é™åˆ¶æ•°æ®åº“ç”¨æˆ·æƒé™
   - å®šæœŸå¤‡ä»½æ•°æ®

4. **Tokenå®‰å…¨**
   - è®¾ç½®åˆç†çš„Tokenè¿‡æœŸæ—¶é—´
   - ä½¿ç”¨å®‰å…¨çš„Tokenå­˜å‚¨æ–¹å¼
   - å®ç°Tokenåˆ·æ–°æœºåˆ¶

### æ€§èƒ½ä¼˜åŒ–

1. **æ•°æ®åº“ä¼˜åŒ–**
   ```properties
   # è¿æ¥æ± é…ç½®
   spring.datasource.hikari.maximum-pool-size=20
   spring.datasource.hikari.minimum-idle=5

   # JPAä¼˜åŒ–
   spring.jpa.properties.hibernate.jdbc.batch_size=20
   spring.jpa.properties.hibernate.order_inserts=true
   ```

2. **ç¼“å­˜é…ç½®**
   ```java
   @EnableCaching
   @Configuration
   public class CacheConfig {
       @Bean
       public CacheManager cacheManager() {
           return new ConcurrentMapCacheManager("users", "permissions");
       }
   }
   ```

3. **å¼‚æ­¥å¤„ç†**
   ```java
   @Async
   public CompletableFuture<Void> sendEmail(String email) {
       // å¼‚æ­¥å‘é€é‚®ä»¶
       return CompletableFuture.completedFuture(null);
   }
   ```

### ç›‘æ§å»ºè®®

1. **åº”ç”¨ç›‘æ§**
   - é›†æˆActuatorç«¯ç‚¹
   - é…ç½®PrometheusæŒ‡æ ‡
   - è®¾ç½®å¥åº·æ£€æŸ¥

2. **æ—¥å¿—ç®¡ç†**
   ```properties
   # æ—¥å¿—é…ç½®
   logging.level.com.viper.demo=INFO
   logging.pattern.file=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n
   logging.file.name=logs/sa-token-demo.log
   ```

3. **é”™è¯¯è¿½è¸ª**
   - é›†æˆSentryæˆ–ç±»ä¼¼å·¥å…·
   - é…ç½®å¼‚å¸¸é€šçŸ¥
   - å®šæœŸæ£€æŸ¥é”™è¯¯æ—¥å¿—

## ğŸ¤ è´¡çŒ®æŒ‡å—

æˆ‘ä»¬æ¬¢è¿æ‰€æœ‰å½¢å¼çš„è´¡çŒ®ï¼

### è´¡çŒ®æ–¹å¼

1. **Fork** é¡¹ç›®
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯ **Pull Request**

### å¼€å‘è§„èŒƒ

- éµå¾ª Java ç¼–ç è§„èŒƒ
- ç¼–å†™å•å…ƒæµ‹è¯•
- æ›´æ–°ç›¸å…³æ–‡æ¡£
- æäº¤ä¿¡æ¯è¦æ¸…æ™°æ˜ç¡®

### ä»£ç é£æ ¼

```java
// å¥½çš„ç¤ºä¾‹
@Service
@Transactional
public class UserServiceImpl implements UserService {

    private final UserRepository userRepository;

    public UserServiceImpl(UserRepository userRepository) {
        this.userRepository = userRepository;
    }

    @Override
    public User findById(Integer id) {
        if (id == null) {
            throw new IllegalArgumentException("User ID cannot be null");
        }
        return userRepository.findById(id)
                .orElseThrow(() -> new UserNotFoundException("User not found: " + id));
    }
}
```

### æµ‹è¯•è¦æ±‚

- å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 80%
- é›†æˆæµ‹è¯•è¦†ç›–ä¸»è¦æµç¨‹
- æµ‹è¯•å‘½åæ¸…æ™°æ˜ç¡®
- åŒ…å«è¾¹ç•Œæ¡ä»¶æµ‹è¯•

### é—®é¢˜åé¦ˆ

å¦‚æœæ‚¨å‘ç°ä»»ä½•é—®é¢˜æˆ–æœ‰æ”¹è¿›å»ºè®®ï¼Œè¯·ï¼š

1. æŸ¥çœ‹ [Issues](../../issues) æ˜¯å¦å·²æœ‰ç›¸å…³é—®é¢˜
2. å¦‚æœæ²¡æœ‰ï¼Œè¯·åˆ›å»ºæ–°çš„ Issue
3. è¯¦ç»†æè¿°é—®é¢˜å’Œå¤ç°æ­¥éª¤
4. æä¾›ç›¸å…³çš„æ—¥å¿—ä¿¡æ¯

## ğŸ“ˆ æ›´æ–°æ—¥å¿—

### v1.0.0 (2025-06-22)

#### âœ¨ æ–°åŠŸèƒ½
- ğŸ‰ åˆå§‹ç‰ˆæœ¬å‘å¸ƒ
- âœ… å®Œæ•´çš„ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- âœ… åŸºäºSA-Tokençš„æƒé™ç®¡ç†
- âœ… RESTful APIè®¾è®¡
- âœ… å®Œæ•´çš„å•å…ƒæµ‹è¯•è¦†ç›–
- âœ… Dockeræ”¯æŒ
- âœ… è¯¦ç»†çš„æ–‡æ¡£

#### ğŸ”§ æŠ€æœ¯ç‰¹æ€§
- Spring Boot 3.4.7
- SA-Token 1.44.0
- Java 21æ”¯æŒ
- MySQL 8.0å…¼å®¹
- JPA + MyBatisåŒæŒä¹…å±‚
- 173ä¸ªå•å…ƒæµ‹è¯•

#### ğŸ“š æ–‡æ¡£
- å®Œæ•´çš„APIæ–‡æ¡£
- è¯¦ç»†çš„éƒ¨ç½²æŒ‡å—
- æµ‹è¯•æ–‡æ¡£
- æœ€ä½³å®è·µæŒ‡å—

### è®¡åˆ’ä¸­çš„åŠŸèƒ½

#### v1.1.0 (è®¡åˆ’ä¸­)
- ğŸ”„ Tokenåˆ·æ–°æœºåˆ¶
- ğŸ“§ é‚®ä»¶éªŒè¯åŠŸèƒ½
- ğŸ“± çŸ­ä¿¡éªŒè¯ç 
- ğŸ” åŒå› å­è®¤è¯(2FA)
- ğŸ“Š ç”¨æˆ·è¡Œä¸ºåˆ†æ

#### v1.2.0 (è®¡åˆ’ä¸­)
- ğŸŒ å¤šè¯­è¨€æ”¯æŒ(i18n)
- ğŸ¨ ç®¡ç†åå°ç•Œé¢
- ğŸ“ˆ ç›‘æ§é¢æ¿
- ğŸ” å®¡è®¡æ—¥å¿—
- ğŸš€ Redisç¼“å­˜é›†æˆ

#### v2.0.0 (é•¿æœŸè®¡åˆ’)
- ğŸ¢ å¤šç§Ÿæˆ·æ”¯æŒ
- ğŸ”— OAuth2.0é›†æˆ
- ğŸŒŸ å¾®æœåŠ¡æ¶æ„
- â˜ï¸ äº‘åŸç”Ÿæ”¯æŒ
- ğŸ¤– AIå®‰å…¨æ£€æµ‹

## ğŸ—ºï¸ æŠ€æœ¯è·¯çº¿å›¾

```mermaid
graph TD
    A[v1.0.0 åŸºç¡€ç‰ˆæœ¬] --> B[v1.1.0 å¢å¼ºåŠŸèƒ½]
    B --> C[v1.2.0 ä¼ä¸šåŠŸèƒ½]
    C --> D[v2.0.0 äº‘åŸç”Ÿç‰ˆæœ¬]

    A --> A1[ç”¨æˆ·è®¤è¯]
    A --> A2[æƒé™ç®¡ç†]
    A --> A3[APIæ¥å£]

    B --> B1[Tokenåˆ·æ–°]
    B --> B2[é‚®ä»¶éªŒè¯]
    B --> B3[2FAè®¤è¯]

    C --> C1[å¤šè¯­è¨€]
    C --> C2[ç®¡ç†åå°]
    C --> C3[ç›‘æ§é¢æ¿]

    D --> D1[å¤šç§Ÿæˆ·]
    D --> D2[å¾®æœåŠ¡]
    D --> D3[äº‘åŸç”Ÿ]
```

## ğŸ† é¡¹ç›®äº®ç‚¹

### ğŸ¯ æŠ€æœ¯äº®ç‚¹
- **ç°ä»£åŒ–æ¶æ„**: åŸºäºSpring Boot 3å’ŒJava 21
- **å®‰å…¨å¯é **: é‡‡ç”¨SA-Tokenæ¡†æ¶ï¼Œå®‰å…¨æ€§æœ‰ä¿éšœ
- **æµ‹è¯•å®Œå¤‡**: 173ä¸ªæµ‹è¯•ç”¨ä¾‹ï¼Œè¦†ç›–ç‡è¾¾90%+
- **æ–‡æ¡£è¯¦ç»†**: å®Œæ•´çš„APIæ–‡æ¡£å’Œéƒ¨ç½²æŒ‡å—
- **æ˜“äºæ‰©å±•**: æ¨¡å—åŒ–è®¾è®¡ï¼Œä¾¿äºåŠŸèƒ½æ‰©å±•

### ğŸš€ æ€§èƒ½ç‰¹ç‚¹
- **é«˜å¹¶å‘**: æ”¯æŒå¤§é‡ç”¨æˆ·åŒæ—¶åœ¨çº¿
- **ä½å»¶è¿Ÿ**: ä¼˜åŒ–çš„æ•°æ®åº“æŸ¥è¯¢å’Œç¼“å­˜ç­–ç•¥
- **å¯æ‰©å±•**: æ”¯æŒæ°´å¹³æ‰©å±•å’Œè´Ÿè½½å‡è¡¡
- **ç›‘æ§å®Œå–„**: å†…ç½®å¥åº·æ£€æŸ¥å’Œæ€§èƒ½ç›‘æ§

### ğŸ’¡ å¼€å‘ä½“éªŒ
- **å¼€ç®±å³ç”¨**: ç®€å•é…ç½®å³å¯å¯åŠ¨
- **çƒ­é‡è½½**: å¼€å‘ç¯å¢ƒæ”¯æŒçƒ­é‡è½½
- **è°ƒè¯•å‹å¥½**: è¯¦ç»†çš„æ—¥å¿—å’Œé”™è¯¯ä¿¡æ¯
- **IDEæ”¯æŒ**: å®Œç¾æ”¯æŒä¸»æµIDE

## ğŸ“Š é¡¹ç›®ç»Ÿè®¡

| æŒ‡æ ‡ | æ•°å€¼ |
|------|------|
| ä»£ç è¡Œæ•° | ~3,000è¡Œ |
| æµ‹è¯•ç”¨ä¾‹ | 173ä¸ª |
| æµ‹è¯•è¦†ç›–ç‡ | 90%+ |
| APIæ¥å£ | 15ä¸ª |
| æ–‡æ¡£é¡µæ•° | 50+ |
| æ”¯æŒçš„æ•°æ®åº“ | MySQL, H2 |
| æœ€ä½Javaç‰ˆæœ¬ | Java 21 |

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ MIT è®¸å¯è¯ - æŸ¥çœ‹ [LICENSE](LICENSE) æ–‡ä»¶äº†è§£è¯¦æƒ…ã€‚

## ğŸ™ è‡´è°¢

æ„Ÿè°¢ä»¥ä¸‹å¼€æºé¡¹ç›®å’Œç¤¾åŒºï¼š

- [SA-Token](https://sa-token.cc/) - ä¼˜ç§€çš„æƒé™è®¤è¯æ¡†æ¶
- [Spring Boot](https://spring.io/projects/spring-boot) - å¼ºå¤§çš„åº”ç”¨æ¡†æ¶
- [MyBatis](https://mybatis.org/) - ä¼˜ç§€çš„æŒä¹…å±‚æ¡†æ¶
- [JUnit](https://junit.org/) - å•å…ƒæµ‹è¯•æ¡†æ¶
- [Mockito](https://site.mockito.org/) - Mockæµ‹è¯•æ¡†æ¶
- [Lombok](https://projectlombok.org/) - ä»£ç ç®€åŒ–å·¥å…·

ç‰¹åˆ«æ„Ÿè°¢æ‰€æœ‰è´¡çŒ®è€…å’Œä½¿ç”¨è€…çš„æ”¯æŒï¼

## ğŸ“ è”ç³»æˆ‘ä»¬

- ğŸ“§ é‚®ç®±: [your-email@example.com](mailto:your-email@example.com)
- ğŸ› é—®é¢˜åé¦ˆ: [Issues](../../issues)
- ğŸ’¬ è®¨è®ºäº¤æµ: [Discussions](../../discussions)
- ğŸ“– æ–‡æ¡£åœ°å€: [Documentation](docs/)
- ğŸŒŸ é¡¹ç›®åœ°å€: [GitHub Repository](../../)

## ğŸ”— ç›¸å…³é“¾æ¥

- [SA-Tokenå®˜æ–¹æ–‡æ¡£](https://sa-token.cc/doc.html)
- [Spring Bootå®˜æ–¹æ–‡æ¡£](https://spring.io/projects/spring-boot)
- [MySQLå®˜æ–¹æ–‡æ¡£](https://dev.mysql.com/doc/)
- [Dockerå®˜æ–¹æ–‡æ¡£](https://docs.docker.com/)

---

<div align="center">

### ğŸŒŸ å¦‚æœè¿™ä¸ªé¡¹ç›®å¯¹æ‚¨æœ‰å¸®åŠ©ï¼Œè¯·ç»™æˆ‘ä»¬ä¸€ä¸ª Starï¼

[![GitHub stars](https://img.shields.io/github/stars/your-username/sa-token-demo.svg?style=social&label=Star)](../../stargazers)
[![GitHub forks](https://img.shields.io/github/forks/your-username/sa-token-demo.svg?style=social&label=Fork)](../../network/members)
[![GitHub watchers](https://img.shields.io/github/watchers/your-username/sa-token-demo.svg?style=social&label=Watch)](../../watchers)

**Made with â¤ï¸ by SA-Token Demo Team**

*è®©è®¤è¯å˜å¾—ç®€å•ï¼Œè®©å¼€å‘æ›´åŠ é«˜æ•ˆ*

</div>
